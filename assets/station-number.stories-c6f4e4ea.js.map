{"version":3,"file":"station-number.stories-c6f4e4ea.js","sources":["../../src/gzmtr/station-icon/station-icon.tsx","../../src/gzmtr/station-icon/station-number.tsx"],"sourcesContent":["import React, { memo } from 'react';\n\ninterface StationIconProps {\n    stroke: string;\n    large?: boolean;\n}\n\nexport default memo(\n    function StationIcon(props: StationIconProps) {\n        const { stroke, large } = props;\n\n        const pathD = large\n            ? 'M0,12.95 V-12.95 H-12.95 a12.95,12.95 0 0,0 0,25.9 h25.9 a12.95,12.95 0 0,0 0,-25.9 H0'\n            : 'M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0';\n\n        return <path d={pathD} fill=\"#fff\" strokeWidth={2} stroke={stroke} />;\n    },\n    (prevProps, nextProps) => prevProps.stroke === nextProps.stroke && prevProps.large === nextProps.large\n);\n","import { SVGProps, useEffect, useRef, useState } from 'react';\nimport StationIcon from './station-icon';\n\nconst TEXT_MAX_WIDTH = 15;\n\ninterface StationNumberProps extends SVGProps<SVGGElement> {\n    lineNum: string;\n    stnNum: string;\n    strokeColour: string;\n    passed?: boolean;\n    large?: boolean;\n}\n\nexport default function StationNumber(props: StationNumberProps) {\n    const { lineNum, stnNum, strokeColour, passed, large, ...others } = props;\n\n    const lineNumEl = useRef<SVGTextElement | null>(null);\n    const stnNumEl = useRef<SVGTextElement | null>(null);\n\n    const [lineNumBBox, setLineNumBBox] = useState({ width: 0 } as DOMRect);\n    const [stnNumBBox, setStnNumBBox] = useState({ width: 0 } as DOMRect);\n\n    useEffect(() => {\n        lineNumEl.current && setLineNumBBox(lineNumEl.current.getBBox());\n        stnNumEl.current && setStnNumBBox(stnNumEl.current.getBBox());\n    }, [lineNum, stnNum]);\n\n    const lineNumScale = TEXT_MAX_WIDTH / Math.max(TEXT_MAX_WIDTH, lineNumBBox.width);\n    const stnNumScale =\n        lineNum.length === 2 && stnNum.length === 2\n            ? lineNumScale\n            : TEXT_MAX_WIDTH / Math.max(TEXT_MAX_WIDTH, stnNumBBox.width);\n\n    return (\n        <g {...others}>\n            <StationIcon stroke={passed ? '#aaa' : strokeColour} large={large} />\n            <g\n                textAnchor=\"middle\"\n                fontSize={13.5}\n                transform={large ? 'scale(1.4)' : ''}\n                fill={passed ? '#aaa' : '#000'}\n            >\n                <g transform={`translate(-9.25,0)scale(${lineNumScale})`}>\n                    <text ref={lineNumEl} className=\"rmg-name__zh\">\n                        {lineNum}\n                    </text>\n                </g>\n                <g transform={`translate(9.25,0)scale(${stnNumScale})`}>\n                    <text ref={stnNumEl} className=\"rmg-name__zh\">\n                        {stnNum}\n                    </text>\n                </g>\n            </g>\n        </g>\n    );\n}\n"],"names":["StationIcon","memo","props","stroke","large","pathD","jsx","prevProps","nextProps","TEXT_MAX_WIDTH","StationNumber","lineNum","stnNum","strokeColour","passed","others","lineNumEl","useRef","stnNumEl","lineNumBBox","setLineNumBBox","useState","stnNumBBox","setStnNumBBox","useEffect","lineNumScale","stnNumScale","jsxs"],"mappings":"wHAOA,MAAAA,EAAAC,EAAA,KAAe,SAAAC,EAAA,CAEP,KAAA,CAAA,OAAAC,EAAA,MAAAC,CAAA,EAAAF,EAEAG,EAAAD,EAAA,yFAAA,kFAIA,OAAAE,MAAA,OAAA,CAAA,EAAAD,EAAA,KAAA,OAAA,YAAA,EAAA,OAAAF,CAAA,CAAA,CAAmE,EACvE,CAAAI,EAAAC,IAAAD,EAAA,SAAAC,EAAA,QAAAD,EAAA,QAAAC,EAAA,KAEJ,gTCfA,MAAAC,EAAA,GAUA,SAAAC,EAAAR,EAAA,CACI,KAAA,CAAA,QAAAS,EAAA,OAAAC,EAAA,aAAAC,EAAA,OAAAC,EAAA,MAAAV,EAAA,GAAAW,CAAA,EAAAb,EAEAc,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EAEA,CAAAE,EAAAC,CAAA,EAAAC,EAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,EAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EAEAG,EAAAA,UAAA,IAAA,CACIR,EAAA,SAAAI,EAAAJ,EAAA,QAAA,QAAA,CAAA,EACAE,EAAA,SAAAK,EAAAL,EAAA,QAAA,QAAA,CAAA,CAA4D,EAAA,CAAAP,EAAAC,CAAA,CAAA,EAGhE,MAAAa,EAAAhB,EAAA,KAAA,IAAAA,EAAAU,EAAA,KAAA,EACAO,EAAAf,EAAA,SAAA,GAAAC,EAAA,SAAA,EAAAa,EAAAhB,EAAA,KAAA,IAAAA,EAAAa,EAAA,KAAA,EAKA,OAAAK,EAAA,KAAA,IAAA,CAAA,GAAAZ,EAAA,SAAA,CAEQT,EAAA,IAAAN,EAAA,CAAA,OAAAc,EAAA,OAAAD,EAAA,MAAAT,EAAA,EAAmEuB,EAAA,KACnE,IAAC,CAAA,WAAA,SACc,SAAA,KACD,UAAAvB,EAAA,aAAA,GACwB,KAAAU,EAAA,OAAA,OACV,SAAA,CAExBR,MAAA,IAAA,CAAA,UAAA,2BAAAmB,CAAA,IAAA,SAAAnB,EAAAA,IAAA,OAAA,CAAA,IAAAU,EAAA,UAAA,eAAA,SAAAL,CAAA,CAAA,EAAA,EAIAL,MAAA,IAAA,CAAA,UAAA,0BAAAoB,CAAA,IAAA,SAAApB,EAAAA,IAAA,OAAA,CAAA,IAAAY,EAAA,UAAA,eAAA,SAAAN,CAAA,CAAA,EAAA,CAKA,CAAA,CAAA,CACJ,CAAA,CAAA,CAGZ;;;;;;;;;;;;;;;;;;;;;;;;;"}