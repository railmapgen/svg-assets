import{j as n}from"./jsx-runtime-Cf8x2fCZ.js";import{r as a}from"./index-BlmOqGMO.js";var y=(r=>(r.black="#000",r.white="#fff",r))(y||{});const C=45,h=C-3,R=(r,e)=>{const s=[r,e].map(t=>t.match(/^(\w+).+$/));if(s[0]&&s[1]&&s[0][1]===s[1][1])return s[0][1]},I=r=>{const e=r.match(/^(\d+)\D+$/);return e==null?void 0:e[1]};function z(r){const{customWidth:e,...s}=r,t=(e??C)-C;return n.jsx("rect",{x:-22.5-t/2,height:24,width:e??C,rx:4.5,...s,"data-testid":"intBox"})}z.__docgenInfo={description:"",methods:[],displayName:"InterchangeBox",props:{customWidth:{required:!1,tsType:{name:"number"},description:""}},composes:["SVGProps"]};const Z=(r,e)=>{const s=I(r);if(s)return{isDigit:!0,spanningPart:s};const t=R(r,e);return t?{isDigit:!1,spanningPart:t}:{isDigit:!1,spanningPart:""}},$=a.forwardRef(function(e,s){const{zhName:t,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:l,children:p,spanDigits:D,...N}=e,{isDigit:c,spanningPart:i}=Z(t,o),m=a.useRef(null),[d,E]=a.useState({x:0,height:0,width:0});a.useEffect(()=>{m.current&&E(m.current.getBBox())},[t,o]);const j=h/Math.max(h,d.width),S=(-d.x-d.width/2)*j,x=d.height*(1-j)/2;return n.jsxs("g",{ref:s,textAnchor:"middle",fill:l?y.white:f,...N,children:[n.jsx(z,{fill:l?"#aaa":u}),n.jsx("g",{ref:m,transform:`translate(${S},${x})scale(${j})`,children:n.jsxs("text",{className:g,fontSize:21,x:-1,y:12,textAnchor:"end",dominantBaseline:"central",children:[i,n.jsx("tspan",{className:g,fontSize:10,x:0,dy:-4,textAnchor:"start",dominantBaseline:"central",children:t.slice(i.length).trim()}),n.jsx("tspan",{className:B,fontSize:6.5,letterSpacing:-.1,x:0,dy:10,textAnchor:"start",dominantBaseline:"middle",children:c?o:o.slice(i.length).trim()})]})}),p]})}),b=a.forwardRef(function(e,s){const{zhName:t,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:l,children:p,spanDigits:D,...N}=e,c=I(t)??"",i=a.useRef(null),m=a.useRef(null),[d,E]=a.useState({width:0}),[j,S]=a.useState({width:0});a.useEffect(()=>{i.current&&E(i.current.getBBox()),m.current&&S(m.current.getBBox())},[t,o]);const x=h/Math.max(h,d.width),w=h/Math.max(h,j.width),L={nameZh:{y:7.3+13.5*(1-x)*x/2},nameEn:{y:19.5-9*(1-w)*w/2}};return n.jsxs("g",{ref:s,textAnchor:"middle",fill:l?y.white:f,...N,children:[n.jsx(z,{fill:l?"#aaa":u}),n.jsxs("text",{ref:i,className:g,fontSize:12,transform:`translate(0,${L.nameZh.y})scale(${x})`,dominantBaseline:"central",children:[n.jsx("tspan",{fontSize:16,dy:.7,dominantBaseline:"central",children:c}),n.jsx("tspan",{dy:-.7,dominantBaseline:"central",children:t.slice(c.length)})]}),n.jsx("text",{ref:m,className:B,fontSize:8,transform:`translate(0,${L.nameEn.y})scale(${w})`,dominantBaseline:"middle",children:o}),p]})}),_=a.forwardRef(function(e,s){const{zhName:t,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:l,children:p,spanDigits:D,...N}=e,c=a.useRef(null),[i,m]=a.useState({width:0});a.useEffect(()=>{c.current&&m(c.current.getBBox())},[t,o]);const d=Math.max(45,i.width+4);return n.jsxs("g",{ref:s,textAnchor:"middle",fill:l?y.white:f,...N,children:[n.jsx(z,{customWidth:d,fill:l?"#aaa":u}),n.jsxs("g",{ref:c,children:[n.jsx("text",{className:g,fontSize:8.5,y:8,dominantBaseline:"central",children:t}),n.jsx("text",{className:B,fontSize:5.5,y:18,dominantBaseline:"middle",children:o})]}),p]})}),A=a.forwardRef(function(e,s){const{zhName:t,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:l,children:p,spanDigits:D,...N}=e,c=a.useRef(null),i=a.useRef(null),[m,d]=a.useState({width:0}),[E,j]=a.useState({width:0});a.useEffect(()=>{c.current&&d(c.current.getBBox()),i.current&&j(i.current.getBBox())},[t,o]);const S=h/Math.max(h,m.width),x=h/Math.max(h,E.width),w={nameZh:{y:7.3+13.5*(1-S)*S/2},nameEn:{y:19.5-9*(1-x)*x/2}};return n.jsxs("g",{ref:s,textAnchor:"middle",fill:l?y.white:f,...N,children:[n.jsx(z,{fill:l?"#aaa":u}),n.jsx("text",{ref:c,className:g,fontSize:12,transform:`translate(0,${w.nameZh.y})scale(${S})`,dominantBaseline:"central",children:t}),n.jsx("text",{ref:i,className:B,fontSize:8,transform:`translate(0,${w.nameEn.y})scale(${x})`,dominantBaseline:"middle",children:o}),p]})}),W=a.memo(a.forwardRef(function(e,s){const{zhName:t,enName:o,spanDigits:f}=e;switch(T(t,o)){case 1:return f?n.jsx($,{ref:s,...e}):n.jsx(b,{ref:s,...e});case 2:return n.jsx($,{...e});default:return t.length>=5?n.jsx(_,{...e}):n.jsx(A,{...e})}})),T=(r,e)=>I(r)!==void 0?1:R(r,e)!==void 0?2:3;export{W as L,y as M};
