import{j as c}from"./jsx-runtime-BjgbQsUx.js";import{b as y,I as C,c as N,S as O}from"./generic-station-number-CfBldsCW.js";import{S as T,F as $}from"./station-number-DvK0eBzD.js";import{S as B,a as D}from"./station-number-ej78HG2n.js";import{r as m}from"./index-DEBVq0NN.js";function v({position:r,...e}){const a=r==="right"?"rotate(180)":"rotate(0)";return c.jsx("circle",{cx:-y*.4,cy:0,r:y/4,stroke:"#aaa",strokeWidth:C*1.75,fill:"white",strokeDasharray:"2.7 2.5",transform:a,...e})}v.__docgenInfo={description:"",methods:[],displayName:"OSILink",props:{position:{required:!0,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:""}}};const _=(r,e)=>Array.from(Array(r).keys()).map(a=>(a-(r-1)/2)*e),E=(r,e,a)=>{if(r<=0)return[];if(r===1)return[[0,0]];const u=e>r?r:e,I=y,i=N,f=_(u,I),S=Math.ceil(r/u),k=_(S,i),t=r%u,p=[];for(let l=0;l<S;l++){const x=a?S-1:0;if(t===0||l!==x)for(let s=0;s<u;s++)p.push([f[s],k[l]]);else{const s=_(t,I);for(let h=0;h<t;h++)p.push([s[h],k[l]])}}return p},j=r=>r==="fmetro"?$:D,g=C*7,w=C*2.2,M=m.forwardRef(function({stations:e,textClassName:a,columns:u=2,topHeavy:I,anchorAt:i,osiPosition:f,...S},k){const t=m.useMemo(()=>E(e.length,u,I),[e.length,u,I]),[p,l]=m.useMemo(()=>{if(i===void 0)return[0,0];if(i<0||i>=t.length)return console.warn(`<InterchangeStation2024/>, anchor index ${i} is out of bound`),[0,0];{const[n,o]=t[i];return[-n,-o]}},[t,i]),x=m.useRef(null),s=m.useRef([]);m.useEffect(()=>{s.current=s.current.slice(0,e.length)},[e.length]);const h=e.length===2&&u===1&&!!f;return m.useImperativeHandle(k,()=>({target:x.current,children:s.current,getCoordinates:()=>t,getCorrectedBBox:()=>{var o;const n=((o=x.current)==null?void 0:o.getBBox())??{x:0,y:0,width:0,height:0};return n.y-=g/2,n.height+=g,h?(f==="left"?n.x-=w/2:n.x-=g/2,n.width+=w/2+g/2):(n.x-=g/2,n.width+=g),n},getTranslate:()=>[p,l]}),[t,p,l,x.current,s.current,f]),c.jsxs("g",{ref:x,transform:`translate(${p},${l})`,...S,children:[e.map(({style:n},o)=>{const d=j(n);return c.jsx(d,{stroke:"#aaa",filled:!0,strokeWidth:g,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),h&&c.jsx(v,{position:f,r:y/2.9,strokeWidth:w,strokeDasharray:void 0}),e.map(({style:n},o)=>{const d=j(n);return c.jsx(d,{stroke:"white",filled:!0,strokeWidth:C*2.6,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),h&&c.jsx(v,{position:f}),e.length&&c.jsx("rect",{fill:"white",x:-12,y:t[0][1],width:24,height:-t[0][1]*2}),e.map(({style:n,...o},d)=>{const R=n==="fmetro"?T:B;return c.jsx(R,{ref:b=>s.current[d]=b,transform:`translate(${t[d][0]},${t[d][1]})`,textClassName:a,...o},d)})]})});M.__docgenInfo={description:"",methods:[{name:"getCoordinates",docblock:null,modifiers:[],params:[],returns:null},{name:"getCorrectedBBox",docblock:null,modifiers:[],params:[],returns:null},{name:"getTranslate",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InterchangeStation2024",props:{columns:{defaultValue:{value:"2",computed:!1},required:!1}}};function W({children:r}){const[e,a]=m.useState(Math.random());return c.jsx(O.Provider,{value:{updateId:e,update:()=>a(Math.random())},children:r})}W.__docgenInfo={description:"",methods:[],displayName:"SvgAssetsContextProvider"};export{M as I,W as S};
