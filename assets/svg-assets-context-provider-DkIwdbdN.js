import{j as c}from"./jsx-runtime-Cf8x2fCZ.js";import{a as k,c as _,d as R,S as O}from"./generic-station-number-CxC6qO9q.js";import{S as $,F as B}from"./station-number-Dq96BenH.js";import{S as q,a as D}from"./station-number-BVUGH68K.js";import{r as p}from"./index-BlmOqGMO.js";function w({position:r,...e}){const a=r==="right"?"rotate(180)":"rotate(0)";return c.jsx("circle",{cx:-38.3*.4,cy:0,r:_/4,stroke:"#aaa",strokeWidth:k*1.75,fill:"white",strokeDasharray:"2.7 2.5",transform:a,...e})}w.__docgenInfo={description:"",methods:[],displayName:"OSILink",props:{position:{required:!0,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:""}}};const T=(r,e)=>Array.from(Array(r).keys()).map(a=>(a-(r-1)/2)*e),E=(r,e,a)=>{if(r<=0)return[];if(r===1)return[[0,0]];const u=e>r?r:e,g=_,m=R,f=T(u,g),x=Math.ceil(r/u),y=T(x,m),I=r%u,t=[];for(let i=0;i<x;i++){const S=a?x-1:0;if(I===0||i!==S)for(let s=0;s<u;s++)t.push([f[s],y[i]]);else{const s=T(I,g);for(let l=0;l<I;l++)t.push([s[l],y[i]])}}return t},b=r=>r==="fmetro"?B:D,h=k*7,v=k*2.2,M=p.forwardRef(function({stations:e,textClassName:a,columns:u=2,topHeavy:g,anchorAt:m,osiPosition:f,children:x,...y},I){const t=p.useMemo(()=>E(e.length,u,g),[e.length,u,g]),[i,S]=p.useMemo(()=>{if(m===void 0)return[0,0];if(m<0||m>=t.length)return console.warn(`<InterchangeStation2024/>, anchor index ${m} is out of bound`),[0,0];{const[n,o]=t[m];return[-n,-o]}},[t,m]),s=p.useRef(null),l=p.useRef([]);p.useEffect(()=>{l.current=l.current.slice(0,e.length)},[e.length]);const C=e.length===2&&u===1&&!!f;return p.useImperativeHandle(I,()=>({target:s.current,children:l.current,getCoordinates:()=>t,getCorrectedBBox:()=>{var o;const n=((o=s.current)==null?void 0:o.getBBox())??{x:0,y:0,width:0,height:0};return n.y-=h/2,n.height+=h,C?(f==="left"?n.x-=v/2:n.x-=h/2,n.width+=v/2+h/2):(n.x-=h/2,n.width+=h),n},getTranslate:()=>[i,S]}),[t,i,S,s.current,l.current,f]),c.jsxs("g",{ref:s,transform:`translate(${i},${S})`,...y,children:[e.map(({style:n},o)=>{const d=b(n);return c.jsx(d,{stroke:"#aaa",filled:!0,strokeWidth:h,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),C&&c.jsx(w,{position:f,r:_/2.9,strokeWidth:v,strokeDasharray:void 0}),e.map(({style:n},o)=>{const d=b(n);return c.jsx(d,{stroke:"white",filled:!0,strokeWidth:k*2.6,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),C&&c.jsx(w,{position:f}),e.length&&c.jsx("rect",{fill:"white",x:-12,y:t[0][1],width:24,height:-t[0][1]*2}),e.map(({style:n,...o},d)=>{const j=n==="fmetro"?$:q;return c.jsx(j,{ref:N=>l.current[d]=N,transform:`translate(${t[d][0]},${t[d][1]})`,textClassName:a,...o},d)}),x]})});M.__docgenInfo={description:"",methods:[{name:"getCoordinates",docblock:null,modifiers:[],params:[],returns:null},{name:"getCorrectedBBox",docblock:null,modifiers:[],params:[],returns:null},{name:"getTranslate",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InterchangeStation2024",props:{stations:{required:!0,tsType:{name:"Array",elements:[{name:"StationProps"}],raw:"StationProps[]"},description:""},textClassName:{required:!1,tsType:{name:"string"},description:""},columns:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},topHeavy:{required:!1,tsType:{name:"boolean"},description:""},anchorAt:{required:!1,tsType:{name:"number"},description:""},osiPosition:{required:!1,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:""}},composes:["SVGProps"]};function W({children:r}){const[e,a]=p.useState(Math.random());return c.jsx(O.Provider,{value:{updateId:e,update:()=>a(Math.random())},children:r})}W.__docgenInfo={description:"",methods:[],displayName:"SvgAssetsContextProvider"};export{M as I,W as S};
