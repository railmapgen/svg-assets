import{j as o}from"./jsx-runtime-Cf8x2fCZ.js";import{r as s}from"./index-BlmOqGMO.js";var D=(i=>(i.black="#000",i.white="#fff",i))(D||{});const L=45,x=L-3,_=(i,t)=>{const r=[i,t].map(e=>e.match(/^(\w+).+$/));if(r[0]&&r[1]&&r[0][1]===r[1][1])return r[0][1]},Z=i=>{const t=i.match(/^(\d+)\D+$/);return t==null?void 0:t[1]};function I(i){const{customWidth:t,...r}=i,e=(t??L)-L;return o.jsx("rect",{x:-22.5-e/2,height:24,width:t??L,rx:4.5,...r,"data-testid":"intBox"})}I.__docgenInfo={description:"",methods:[],displayName:"InterchangeBox",props:{customWidth:{required:!1,tsType:{name:"number"},description:""}},composes:["SVGProps"]};function C(i){var t,r,e="";if(typeof i=="string"||typeof i=="number")e+=i;else if(typeof i=="object")if(Array.isArray(i)){var c=i.length;for(t=0;t<c;t++)i[t]&&(r=C(i[t]))&&(e&&(e+=" "),e+=r)}else for(r in i)i[r]&&(e&&(e+=" "),e+=r);return e}function $(){for(var i,t,r=0,e="",c=arguments.length;r<c;r++)(i=arguments[r])&&(t=C(i))&&(e&&(e+=" "),e+=t);return e}const N=(i,t)=>{const r=Z(i);if(r)return{isDigit:!0,spanningPart:r};const e=_(i,t);return e?{isDigit:!1,spanningPart:e}:{isDigit:!1,spanningPart:""}},R=s.forwardRef(function(t,r){const{zhName:e,enName:c,foregroundColour:g,backgroundColour:B,passed:f,spanDigits:b,className:w,classNames:n,children:j,textProps:a,...S}=t,{isDigit:d,spanningPart:l}=N(e,c),m=s.useRef(null),[h,z]=s.useState({x:0,height:0,width:0});s.useEffect(()=>{m.current&&z(m.current.getBBox())},[e,c]);const E=x/Math.max(x,h.width),y=(-h.x-h.width/2)*E,u=h.height*(1-E)/2;return o.jsxs("g",{ref:r,textAnchor:"middle",fill:f?D.white:g,className:$(n==null?void 0:n.wrapper,w),...S,children:[o.jsx(I,{fill:f?"#aaa":B}),o.jsxs("g",{ref:m,transform:`translate(${y},${u})scale(${E})`,children:[o.jsx("text",{fontSize:21,x:-1,y:12,textAnchor:"end",dominantBaseline:"central",className:n==null?void 0:n.digits,...a==null?void 0:a.digits,children:l}),o.jsx("text",{fontSize:10,x:0,y:8,textAnchor:"start",dominantBaseline:"central",className:n==null?void 0:n.zh,...a==null?void 0:a.zh,children:e.slice(l.length).trim()}),o.jsx("text",{fontSize:6.5,letterSpacing:-.1,x:0,y:18,textAnchor:"start",dominantBaseline:"middle",className:n==null?void 0:n.en,...a==null?void 0:a.en,children:d?c:c.slice(l.length).trim()})]}),j]})}),T=s.forwardRef(function(t,r){const{zhName:e,enName:c,foregroundColour:g,backgroundColour:B,passed:f,spanDigits:b,className:w,classNames:n,children:j,textProps:a,...S}=t,d=Z(e)??"",l=s.useRef(null),m=s.useRef(null),[h,z]=s.useState({x:0,width:0}),[E,y]=s.useState({width:0});s.useEffect(()=>{l.current&&z(l.current.getBBox()),m.current&&y(m.current.getBBox())},[e,c]);const u=x/Math.max(x,h.width),p=x/Math.max(x,E.width),A={nameZh:{x:-(h.x+h.width/2)*u,y:7.3+13.5*(1-u)*u/2*u},nameEn:{y:19.5-9*(1-p)*p/2}};return o.jsxs("g",{ref:r,fill:f?D.white:g,className:$(n==null?void 0:n.wrapper,w),...S,children:[o.jsx(I,{fill:f?"#aaa":B}),o.jsxs("g",{ref:l,transform:`translate(${A.nameZh.x},${A.nameZh.y})scale(${u})`,children:[o.jsx("text",{ref:l,fontSize:16,textAnchor:"end",y:.7,dominantBaseline:"central",className:n==null?void 0:n.digits,...a==null?void 0:a.digits,children:d}),o.jsx("text",{fontSize:12,textAnchor:"start",dominantBaseline:"central",className:n==null?void 0:n.zh,...a==null?void 0:a.zh,children:e.slice(d.length)})]}),o.jsx("text",{ref:m,fontSize:8,textAnchor:"middle",transform:`translate(0,${A.nameEn.y})scale(${p})`,dominantBaseline:"middle",className:n==null?void 0:n.en,...a==null?void 0:a.en,children:c}),j]})}),M=s.forwardRef(function(t,r){const{zhName:e,enName:c,foregroundColour:g,backgroundColour:B,passed:f,spanDigits:b,className:w,classNames:n,children:j,textProps:a,...S}=t,d=s.useRef(null),[l,m]=s.useState({width:0});s.useEffect(()=>{d.current&&m(d.current.getBBox())},[e,c]);const h=Math.max(45,l.width+4);return o.jsxs("g",{ref:r,textAnchor:"middle",fill:f?D.white:g,className:$(n==null?void 0:n.wrapper,w),...S,children:[o.jsx(I,{customWidth:h,fill:f?"#aaa":B}),o.jsxs("g",{ref:d,children:[o.jsx("text",{fontSize:8.5,y:8,dominantBaseline:"central",className:n==null?void 0:n.zh,...a==null?void 0:a.zh,children:e}),o.jsx("text",{fontSize:5.5,y:18,dominantBaseline:"middle",className:n==null?void 0:n.en,...a==null?void 0:a.en,children:c})]}),j]})}),v=s.forwardRef(function(t,r){const{zhName:e,enName:c,foregroundColour:g,backgroundColour:B,passed:f,spanDigits:b,className:w,classNames:n,children:j,textProps:a,...S}=t,d=s.useRef(null),l=s.useRef(null),[m,h]=s.useState({width:0}),[z,E]=s.useState({width:0});s.useEffect(()=>{d.current&&h(d.current.getBBox()),l.current&&E(l.current.getBBox())},[e,c]);const y=x/Math.max(x,m.width),u=x/Math.max(x,z.width),p={nameZh:{y:7.3+13.5*(1-y)*y/2},nameEn:{y:19.5-9*(1-u)*u/2}};return o.jsxs("g",{ref:r,textAnchor:"middle",fill:f?D.white:g,className:$(n==null?void 0:n.wrapper,w),...S,children:[o.jsx(I,{fill:f?"#aaa":B}),o.jsx("text",{ref:d,fontSize:12,transform:`translate(0,${p.nameZh.y})scale(${y})`,dominantBaseline:"central",className:n==null?void 0:n.zh,...a==null?void 0:a.zh,children:e}),o.jsx("text",{ref:l,fontSize:8,transform:`translate(0,${p.nameEn.y})scale(${u})`,dominantBaseline:"middle",className:n==null?void 0:n.en,...a==null?void 0:a.en,children:c}),j]})}),H=s.memo(s.forwardRef(function(t,r){const{zhName:e,enName:c,spanDigits:g}=t;switch(W(e,c)){case 1:return g?o.jsx(R,{ref:r,...t}):o.jsx(T,{ref:r,...t});case 2:return o.jsx(R,{ref:r,...t});default:return e.length>=5?o.jsx(M,{ref:r,...t}):o.jsx(v,{ref:r,...t})}})),W=(i,t)=>Z(i)!==void 0?1:_(i,t)!==void 0?2:3;export{H as L,D as M};
