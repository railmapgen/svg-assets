import{j as l}from"./jsx-runtime-BjgbQsUx.js";import{b as y,I as k,c as N,S as $}from"./generic-station-number-CfBldsCW.js";import{S as b,F as M}from"./station-number-DvK0eBzD.js";import{S as T,a as L}from"./station-number-ej78HG2n.js";import{r as m}from"./index-DEBVq0NN.js";function v({position:r,...e}){const s=r==="right"?"rotate(180)":"rotate(0)";return l.jsx("circle",{cx:-y*.4,cy:0,r:y/4,stroke:"#aaa",strokeWidth:k*1.75,fill:"white",strokeDasharray:"2.7 2.5",transform:s,...e})}v.__docgenInfo={description:"",methods:[],displayName:"OSILink",props:{position:{required:!0,tsType:{name:"union",raw:"'left' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"}]},description:""}}};const C=(r,e)=>Array.from(Array(r).keys()).map(s=>(s-(r-1)/2)*e),O=(r,e,s)=>{if(r<=0)return[];if(r===1)return[[0,0]];const c=e>r?r:e,h=y,u=N,g=C(c,h),I=Math.ceil(r/c),S=C(I,u),t=r%c,d=[];for(let a=0;a<I;a++){const x=s?I-1:0;if(t===0||a!==x)for(let n=0;n<c;n++)d.push([g[n],S[a]]);else{const n=C(t,h);for(let p=0;p<t;p++)d.push([n[p],S[a]])}}return d},_=r=>r==="fmetro"?M:L,R=m.forwardRef(function({stations:e,textClassName:s,columns:c=2,topHeavy:h,anchorAt:u,osiPosition:g,...I},S){const t=m.useMemo(()=>O(e.length,c,h),[e.length,c,h]),[d,a]=m.useMemo(()=>{if(u===void 0)return[0,0];if(u<0||u>=t.length)return console.warn(`<InterchangeStation2024/>, anchor index ${u} is out of bound`),[0,0];{const[f,o]=t[u];return[-f,-o]}},[t,u]),x=m.useRef(null),n=m.useRef([]);m.useEffect(()=>{n.current=n.current.slice(0,e.length)},[e.length]),m.useImperativeHandle(S,()=>({target:x.current,children:n.current,getCoordinates:()=>t,getTranslate:()=>[d,a]}),[t,d,a,x.current,n.current]);const p=e.length===2&&c===1&&!!g;return l.jsxs("g",{ref:x,transform:`translate(${d},${a})`,...I,children:[e.map(({style:f},o)=>{const i=_(f);return l.jsx(i,{stroke:"#aaa",filled:!0,strokeWidth:k*7,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),p&&l.jsx(v,{position:g,r:y/2.9,strokeWidth:k*2.2,strokeDasharray:void 0}),e.map(({style:f},o)=>{const i=_(f);return l.jsx(i,{stroke:"white",filled:!0,strokeWidth:k*2.6,transform:`translate(${t[o][0]},${t[o][1]})`},o)}),p&&l.jsx(v,{position:g}),e.length&&l.jsx("rect",{fill:"white",x:-12,y:t[0][1],width:24,height:-t[0][1]*2}),e.map(({style:f,...o},i)=>{const j=f==="fmetro"?b:T;return l.jsx(j,{ref:w=>n.current[i]=w,transform:`translate(${t[i][0]},${t[i][1]})`,textClassName:s,...o},i)})]})});R.__docgenInfo={description:"",methods:[{name:"getCoordinates",docblock:null,modifiers:[],params:[],returns:null},{name:"getTranslate",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InterchangeStation2024",props:{columns:{defaultValue:{value:"2",computed:!1},required:!1}}};function E({children:r}){const[e,s]=m.useState(Math.random());return l.jsx($.Provider,{value:{updateId:e,update:()=>s(Math.random())},children:r})}E.__docgenInfo={description:"",methods:[],displayName:"SvgAssetsContextProvider"};export{R as I,E as S};
