import{j as t}from"./jsx-runtime-Cf8x2fCZ.js";import{r as a}from"./index-BlmOqGMO.js";var y=(r=>(r.black="#000",r.white="#fff",r))(y||{});const C=45,x=C-3,Z=(r,e)=>{const n=[r,e].map(s=>s.match(/^(\w+).+$/));if(n[0]&&n[1]&&n[0][1]===n[1][1])return n[0][1]},L=r=>{const e=r.match(/^(\d+)\D+$/);return e==null?void 0:e[1]};function z(r){const{customWidth:e,...n}=r,s=(e??C)-C;return t.jsx("rect",{x:-22.5-s/2,height:24,width:e??C,rx:4.5,...n,"data-testid":"intBox"})}z.__docgenInfo={description:"",methods:[],displayName:"InterchangeBox",props:{customWidth:{required:!1,tsType:{name:"number"},description:""}},composes:["SVGProps"]};const R=(r,e)=>{const n=L(r);if(n)return{isDigit:!0,spanningPart:n};const s=Z(r,e);return s?{isDigit:!1,spanningPart:s}:{isDigit:!1,spanningPart:""}},$=a.forwardRef(function(e,n){const{zhName:s,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:m,children:N,spanDigits:D,...j}=e,{isDigit:c,spanningPart:i}=R(s,o),d=a.useRef(null),[l,E]=a.useState({x:0,height:0,width:0});a.useEffect(()=>{d.current&&E(d.current.getBBox())},[s,o]);const p=x/Math.max(x,l.width),w=(-l.x-l.width/2)*p,h=l.height*(1-p)/2;return t.jsxs("g",{ref:n,textAnchor:"middle",fill:m?y.white:f,...j,children:[t.jsx(z,{fill:m?"#aaa":u}),t.jsxs("g",{ref:d,transform:`translate(${w},${h})scale(${p})`,children:[t.jsx("text",{className:B,fontSize:21,x:-1,y:12,textAnchor:"end",dominantBaseline:"central",children:i}),t.jsx("text",{className:g,fontSize:10,x:0,y:8,textAnchor:"start",dominantBaseline:"central",children:s.slice(i.length).trim()}),t.jsx("text",{className:B,fontSize:6.5,letterSpacing:-.1,x:0,y:18,textAnchor:"start",dominantBaseline:"middle",children:c?o:o.slice(i.length).trim()})]}),N]})}),b=a.forwardRef(function(e,n){const{zhName:s,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:m,children:N,spanDigits:D,...j}=e,c=L(s)??"",i=a.useRef(null),d=a.useRef(null),[l,E]=a.useState({x:0,width:0}),[p,w]=a.useState({width:0});a.useEffect(()=>{i.current&&E(i.current.getBBox()),d.current&&w(d.current.getBBox())},[s,o]);const h=x/Math.max(x,l.width),S=x/Math.max(x,p.width),I={nameZh:{x:-(l.x+l.width/2)*h,y:7.3+13.5*(1-h)*h/2*h},nameEn:{y:19.5-9*(1-S)*S/2}};return t.jsxs("g",{ref:n,fill:m?y.white:f,...j,children:[t.jsx(z,{fill:m?"#aaa":u}),t.jsxs("g",{ref:i,transform:`translate(${I.nameZh.x},${I.nameZh.y})scale(${h})`,children:[t.jsx("text",{ref:i,className:g,fontSize:16,textAnchor:"end",y:.7,dominantBaseline:"central",children:c}),t.jsx("text",{className:g,fontSize:12,textAnchor:"start",dominantBaseline:"central",children:s.slice(c.length)})]}),t.jsx("text",{ref:d,className:B,fontSize:8,textAnchor:"middle",transform:`translate(0,${I.nameEn.y})scale(${S})`,dominantBaseline:"middle",children:o}),N]})}),A=a.forwardRef(function(e,n){const{zhName:s,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:m,children:N,spanDigits:D,...j}=e,c=a.useRef(null),[i,d]=a.useState({width:0});a.useEffect(()=>{c.current&&d(c.current.getBBox())},[s,o]);const l=Math.max(45,i.width+4);return t.jsxs("g",{ref:n,textAnchor:"middle",fill:m?y.white:f,...j,children:[t.jsx(z,{customWidth:l,fill:m?"#aaa":u}),t.jsxs("g",{ref:c,children:[t.jsx("text",{className:g,fontSize:8.5,y:8,dominantBaseline:"central",children:s}),t.jsx("text",{className:B,fontSize:5.5,y:18,dominantBaseline:"middle",children:o})]}),N]})}),_=a.forwardRef(function(e,n){const{zhName:s,enName:o,foregroundColour:f,backgroundColour:u,zhClassName:g,enClassName:B,passed:m,children:N,spanDigits:D,...j}=e,c=a.useRef(null),i=a.useRef(null),[d,l]=a.useState({width:0}),[E,p]=a.useState({width:0});a.useEffect(()=>{c.current&&l(c.current.getBBox()),i.current&&p(i.current.getBBox())},[s,o]);const w=x/Math.max(x,d.width),h=x/Math.max(x,E.width),S={nameZh:{y:7.3+13.5*(1-w)*w/2},nameEn:{y:19.5-9*(1-h)*h/2}};return t.jsxs("g",{ref:n,textAnchor:"middle",fill:m?y.white:f,...j,children:[t.jsx(z,{fill:m?"#aaa":u}),t.jsx("text",{ref:c,className:g,fontSize:12,transform:`translate(0,${S.nameZh.y})scale(${w})`,dominantBaseline:"central",children:s}),t.jsx("text",{ref:i,className:B,fontSize:8,transform:`translate(0,${S.nameEn.y})scale(${h})`,dominantBaseline:"middle",children:o}),N]})}),W=a.memo(a.forwardRef(function(e,n){const{zhName:s,enName:o,spanDigits:f}=e;switch(T(s,o)){case 1:return f?t.jsx($,{ref:n,...e}):t.jsx(b,{ref:n,...e});case 2:return t.jsx($,{ref:n,...e});default:return s.length>=5?t.jsx(A,{ref:n,...e}):t.jsx(_,{ref:n,...e})}})),T=(r,e)=>L(r)!==void 0?1:Z(r,e)!==void 0?2:3;export{W as L,y as M};
