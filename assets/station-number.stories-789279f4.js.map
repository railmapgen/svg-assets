{"version":3,"file":"station-number.stories-789279f4.js","sources":["../../src/gzmtr/station-icon/station-icon.tsx","../../src/gzmtr/station-icon/station-number.tsx"],"sourcesContent":["import React, { memo } from 'react';\n\ninterface StationIconProps {\n    strokeColour?: string;\n    large?: boolean;\n}\n\nexport default memo(\n    function StationIcon(props: StationIconProps) {\n        const { strokeColour, large } = props;\n\n        const pathD = large\n            ? 'M0,12.95 V-12.95 H-12.95 a12.95,12.95 0 0,0 0,25.9 h25.9 a12.95,12.95 0 0,0 0,-25.9 H0'\n            : 'M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0';\n\n        return <path d={pathD} fill=\"#fff\" strokeWidth={2} stroke={strokeColour ?? 'var(--rmg-theme-colour)'} />;\n    },\n    (prevProps, nextProps) => prevProps.strokeColour === nextProps.strokeColour && prevProps.large === nextProps.large\n);\n","import { SVGProps, useEffect, useRef, useState } from 'react';\nimport StationIcon from './station-icon';\n\nconst TEXT_MAX_WIDTH = 15;\n\ninterface StationNumberProps extends SVGProps<SVGGElement> {\n    lineNum: string;\n    stnNum: string;\n    strokeColour?: string;\n    passed?: boolean;\n    large?: boolean;\n}\n\nexport default function StationNumber(props: StationNumberProps) {\n    const { lineNum, stnNum, strokeColour, passed, large, ...others } = props;\n\n    const lineNumEl = useRef<SVGTextElement | null>(null);\n    const stnNumEl = useRef<SVGTextElement | null>(null);\n\n    const [lineNumBBox, setLineNumBBox] = useState({ width: 0 } as DOMRect);\n    const [stnNumBBox, setStnNumBBox] = useState({ width: 0 } as DOMRect);\n\n    useEffect(() => {\n        lineNumEl.current && setLineNumBBox(lineNumEl.current.getBBox());\n        stnNumEl.current && setStnNumBBox(stnNumEl.current.getBBox());\n    }, [lineNum, stnNum]);\n\n    const lineNumScale = TEXT_MAX_WIDTH / Math.max(TEXT_MAX_WIDTH, lineNumBBox.width);\n    const stnNumScale =\n        lineNum.length === 2 && stnNum.length === 2\n            ? lineNumScale\n            : TEXT_MAX_WIDTH / Math.max(TEXT_MAX_WIDTH, stnNumBBox.width);\n\n    return (\n        <g {...others}>\n            <StationIcon strokeColour={passed ? '#aaa' : strokeColour} large={large} />\n            <g\n                textAnchor=\"middle\"\n                fontSize={13.5}\n                transform={large ? 'scale(1.4)' : ''}\n                fill={passed ? '#aaa' : '#000'}\n            >\n                <g transform={`translate(-9.25,0)scale(${lineNumScale})`}>\n                    <text ref={lineNumEl} className=\"rmg-name__zh\">\n                        {lineNum}\n                    </text>\n                </g>\n                <g transform={`translate(9.25,0)scale(${stnNumScale})`}>\n                    <text ref={stnNumEl} className=\"rmg-name__zh\">\n                        {stnNum}\n                    </text>\n                </g>\n            </g>\n        </g>\n    );\n}\n"],"names":["StationIcon","memo","props","strokeColour","large","pathD","jsx","prevProps","nextProps","TEXT_MAX_WIDTH","StationNumber","lineNum","stnNum","passed","others","lineNumEl","useRef","stnNumEl","lineNumBBox","setLineNumBBox","useState","stnNumBBox","setStnNumBBox","useEffect","lineNumScale","stnNumScale","jsxs"],"mappings":"wHAOA,MAAAA,EAAAC,EAAA,KAAe,SAAAC,EAAA,CAEP,KAAA,CAAA,aAAAC,EAAA,MAAAC,CAAA,EAAAF,EAEAG,EAAAD,EAAA,yFAAA,kFAIA,OAAAE,EAAA,IAAA,OAAA,CAAA,EAAAD,EAAA,KAAA,OAAA,YAAA,EAAA,OAAAF,GAAA,yBAAA,CAAA,CAAsG,EAC1G,CAAAI,EAAAC,IAAAD,EAAA,eAAAC,EAAA,cAAAD,EAAA,QAAAC,EAAA,KAEJ,4TCfA,MAAAC,EAAA,GAUA,SAAAC,EAAAR,EAAA,CACI,KAAA,CAAA,QAAAS,EAAA,OAAAC,EAAA,aAAAT,EAAA,OAAAU,EAAA,MAAAT,EAAA,GAAAU,CAAA,EAAAZ,EAEAa,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EAEA,CAAAE,EAAAC,CAAA,EAAAC,EAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,EAAA,SAAA,CAAA,MAAA,CAAA,CAAA,EAEAG,EAAAA,UAAA,IAAA,CACIR,EAAA,SAAAI,EAAAJ,EAAA,QAAA,QAAA,CAAA,EACAE,EAAA,SAAAK,EAAAL,EAAA,QAAA,QAAA,CAAA,CAA4D,EAAA,CAAAN,EAAAC,CAAA,CAAA,EAGhE,MAAAY,EAAAf,EAAA,KAAA,IAAAA,EAAAS,EAAA,KAAA,EACAO,EAAAd,EAAA,SAAA,GAAAC,EAAA,SAAA,EAAAY,EAAAf,EAAA,KAAA,IAAAA,EAAAY,EAAA,KAAA,EAKA,OAAAK,EAAA,KAAA,IAAA,CAAA,GAAAZ,EAAA,SAAA,CAEQR,EAAA,IAAAN,EAAA,CAAA,aAAAa,EAAA,OAAAV,EAAA,MAAAC,EAAA,EAAyEsB,EAAA,KACzE,IAAC,CAAA,WAAA,SACc,SAAA,KACD,UAAAtB,EAAA,aAAA,GACwB,KAAAS,EAAA,OAAA,OACV,SAAA,CAExBP,MAAA,IAAA,CAAA,UAAA,2BAAAkB,CAAA,IAAA,SAAAlB,EAAAA,IAAA,OAAA,CAAA,IAAAS,EAAA,UAAA,eAAA,SAAAJ,CAAA,CAAA,EAAA,EAIAL,MAAA,IAAA,CAAA,UAAA,0BAAAmB,CAAA,IAAA,SAAAnB,EAAAA,IAAA,OAAA,CAAA,IAAAW,EAAA,UAAA,eAAA,SAAAL,CAAA,CAAA,EAAA,CAKA,CAAA,CAAA,CACJ,CAAA,CAAA,CAGZ;;;;;;;;;;;;;;;;;;;;;;;;;"}